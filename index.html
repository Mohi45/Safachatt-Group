<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jyoti's Cosmetic House</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/banner.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/products.css">
    <link rel="stylesheet" href="css/gallery.css">
    <link rel="stylesheet" href="css/testimonials.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/checkout.css">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">Safachatt Group</div>
        <div style="position: relative;">
            <button class="menu-toggle" aria-label="Toggle menu">‚ò∞</button>
            <span class="cart-counter" id="cartCounter">0</span>
        </div>
        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="makeover.html">Makeover</a></li>
            <li><a href="#offers">Offers</a></li>
            <li><a href="#gallery">Gallery</a></li>
            <li><a href="#products">Products</a></li>
            <li><a href="#testimonials">Testimonials</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>

    <!-- Banner Slider -->
    <div class="banner-slider" id="banner">
        <img src="img/offers/offer1.png" class="active" alt="Offer 1">
        <img src="img/offers/offer2.png" alt="Offer 2">
        <img src="img/offers/offer3.png" alt="Offer 3">
    </div>

    <header id="home">
        <h1>Jyoti's Cosmetic House</h1>
        <p>Affordable Natural Beauty</p>
    </header>

    <div class="container">

        <!-- Categories -->
        <h2 id="products">Our Products</h2>
        <div class="categories">
            <button class="category-btn active" data-category="all">All</button>
            <button class="category-btn" data-category="SUNSCREEN">SUNSCREEN</button>
            <button class="category-btn" data-category="Body-Loation">Body Loation</button>
            <button class="category-btn" data-category="Beauty-Essentials">Beauty Essentials</button>
            <button class="category-btn" data-category="scrubs">Face & Body Scrubs</button>
            <button class="category-btn" data-category="Serums">Serum Collections</button>
        </div>

        <!-- Products Grid -->
        <div class="products" id="productsGrid">
            <!-- Products will be dynamically loaded here -->
        </div>

        <!-- Floating Buttons -->
        <button id="clearCart">üßπ Clear Cart</button>
        <button id="goToCheckout">üõçÔ∏è Go to Checkout</button>

        <!-- Testimonials -->
        <div class="testimonials" id="testimonials">
            <h2>What Our Customers Say</h2>
            <div class="testimonial">
                <p>"Amazing quality and fast delivery. My skin feels so soft!"</p>
                <span>- Anjali S.</span>
            </div>
            <div class="testimonial">
                <p>"Love the lipsticks! Long-lasting and vibrant colors."</p>
                <span>- Riya K.</span>
            </div>
            <div class="testimonial">
                <p>"Affordable products with premium feel. Highly recommended!"</p>
                <span>- Pooja M.</span>
            </div>
        </div>
    </div>

    <footer id="contact">
        <div class="footer-container">
            <div class="footer-item">
                <h3>Contact Us</h3>
                <p><i class="fab fa-whatsapp"></i> WhatsApp:
                    <a href="https://wa.me/919625290733" target="_blank">+91-9625290733</a>
                </p>
                <p><i class="fas fa-envelope"></i> Email:
                    <a href="mailto:mjsafachattgroup@gmail.com">mjsafachattgroup@gmail.com</a>
                </p>
                <p><i class="fas fa-map-marker-alt"></i> Address:
                    C8/17 Block C, Govind Puram, Ghaziabad 201013
                </p>
            </div>
        </div>
        <p class="footer-bottom">¬© 2025 Safachatt Group. All Rights Reserved.</p>
    </footer>

    <script>
        // Navbar toggle
        const menuToggle = document.querySelector(".menu-toggle");
        const navLinks = document.querySelector(".nav-links");
        menuToggle.addEventListener("click", () => navLinks.classList.toggle("show"));

        // Floating buttons & cart counter
        const goToCheckout = document.getElementById("goToCheckout");
        const clearCart = document.getElementById("clearCart");
        const cartCounter = document.getElementById("cartCounter");

        function updateCartButtons() {
            const cart = JSON.parse(localStorage.getItem("cartData")) || [];
            if (cart.length === 0) {
                goToCheckout.style.display = "none";
                clearCart.style.display = "none";
            } else {
                goToCheckout.style.display = "inline-block";
                clearCart.style.display = "inline-block";
            }
            cartCounter.textContent = cart.reduce((sum, item) => sum + item.qty, 0);
        }

        updateCartButtons();

        goToCheckout.addEventListener("click", () => window.location.href = "checkout.html");
        clearCart.addEventListener("click", () => {
            if (confirm("Are you sure you want to clear all items?")) {
                localStorage.removeItem("cartData");
                updateCartButtons();
            }
        });

        window.addEventListener("storage", () => updateCartButtons());

        // Fetch products from JSON
        const productsGrid = document.getElementById("productsGrid");
        let products = [];

        fetch("products.json")
            .then(res => res.json())
            .then(data => {
                products = data;
                renderProducts();
            })
            .catch(err => console.error("Error loading products.json:", err));

        function renderProducts(filter = "all") {
            productsGrid.innerHTML = "";
            const filtered = filter === "all" ? products : products.filter(p => p.category === filter);
            filtered.forEach(product => {
                const card = document.createElement("div");
                card.className = "product-card";
                card.innerHTML = `
                    <img src="${product.img}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <p>‚Çπ${(product.price * (1 - product.discount / 100)).toFixed(0)} <del>‚Çπ${product.price}</del> <span style="color:green;">(${product.discount}% OFF)</span></p>
                    <button onclick="addToCart(${product.id})">Add to Cart</button>
                `;
                productsGrid.appendChild(card);
            });
        }

        // Category filtering
        document.querySelectorAll(".category-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                document.querySelectorAll(".category-btn").forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                renderProducts(btn.dataset.category);
            });
        });

        // Add to Cart function
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            let cart = JSON.parse(localStorage.getItem("cartData")) || [];
            const index = cart.findIndex(item => item.id === product.id);
            if (index > -1) {
                cart[index].qty += 1;
            } else {
                product.qty = 1;
                cart.push({ ...product });
            }
            localStorage.setItem("cartData", JSON.stringify(cart));
            window.dispatchEvent(new Event('storage')); // trigger immediate cart update
            alert(`${product.name} added to cart!`);
        }
    </script>

</body>

</html>